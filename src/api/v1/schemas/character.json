{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "$id": "https://api.example.com/schemas/character.json",
  "title": "Character Profile Schema",
  "description": "Schema for WoW character profile data",
  "type": "object",
  "required": ["id", "name", "is_active"],
  "properties": {
    "id": {
      "type": "integer",
      "description": "Unique character identifier",
      "minimum": 1
    },
    "name": {
      "type": "string",
      "description": "Character name",
      "minLength": 2,
      "maxLength": 50,
      "pattern": "^[A-Za-z][A-Za-z-']*$"
    },
    "server": {
      "type": "string",
      "description": "Server/realm name",
      "maxLength": 100,
      "examples": ["Stormrage", "Tichondrius", "Area-52"]
    },
    "class_name": {
      "type": "string",
      "description": "Character class",
      "enum": [
        "Death Knight", "Demon Hunter", "Druid", "Evoker", "Hunter",
        "Mage", "Monk", "Paladin", "Priest", "Rogue", "Shaman",
        "Warlock", "Warrior"
      ]
    },
    "spec_name": {
      "type": "string",
      "description": "Character specialization",
      "maxLength": 50,
      "examples": ["Frost", "Fire", "Arcane", "Protection", "Retribution"]
    },
    "level": {
      "type": "integer",
      "description": "Character level",
      "minimum": 1,
      "maximum": 80
    },
    "guild_name": {
      "type": "string",
      "description": "Guild name",
      "maxLength": 100
    },
    "faction": {
      "type": "string",
      "description": "Character faction",
      "enum": ["Alliance", "Horde"]
    },
    "race": {
      "type": "string",
      "description": "Character race",
      "enum": [
        "Human", "Dwarf", "Night Elf", "Gnome", "Draenei", "Worgen",
        "Void Elf", "Lightforged Draenei", "Dark Iron Dwarf", "Kul Tiran",
        "Mechagnome", "Dracthyr",
        "Orc", "Undead", "Tauren", "Troll", "Blood Elf", "Goblin",
        "Nightborne", "Highmountain Tauren", "Mag'har Orc", "Zandalari Troll",
        "Vulpera"
      ]
    },
    "gender": {
      "type": "string",
      "description": "Character gender",
      "enum": ["Male", "Female"]
    },
    "first_seen": {
      "type": "string",
      "format": "date-time",
      "description": "First time character was seen in logs"
    },
    "last_seen": {
      "type": "string",
      "format": "date-time",
      "description": "Last time character was seen in logs"
    },
    "total_encounters": {
      "type": "integer",
      "description": "Total number of encounters",
      "minimum": 0
    },
    "avg_item_level": {
      "type": "number",
      "description": "Average item level",
      "minimum": 1,
      "maximum": 1000,
      "multipleOf": 0.01
    },
    "is_active": {
      "type": "boolean",
      "description": "Whether character is currently active"
    },
    "performance_summary": {
      "$ref": "#/$defs/PerformanceSummary"
    },
    "metadata": {
      "type": "object",
      "description": "Additional character metadata",
      "additionalProperties": true
    }
  },
  "additionalProperties": false,
  "$defs": {
    "PerformanceSummary": {
      "type": "object",
      "description": "Character performance summary statistics",
      "properties": {
        "avg_dps": {
          "type": "number",
          "description": "Average damage per second",
          "minimum": 0
        },
        "avg_hps": {
          "type": "number",
          "description": "Average healing per second",
          "minimum": 0
        },
        "avg_dtps": {
          "type": "number",
          "description": "Average damage taken per second",
          "minimum": 0
        },
        "best_dps": {
          "type": "number",
          "description": "Best damage per second",
          "minimum": 0
        },
        "best_hps": {
          "type": "number",
          "description": "Best healing per second",
          "minimum": 0
        },
        "survival_rate": {
          "type": "number",
          "description": "Survival rate percentage",
          "minimum": 0,
          "maximum": 100
        },
        "activity_percentage": {
          "type": "number",
          "description": "Activity percentage",
          "minimum": 0,
          "maximum": 100
        },
        "parse_percentile": {
          "type": "number",
          "description": "Parse percentile ranking",
          "minimum": 0,
          "maximum": 100
        },
        "encounter_count": {
          "type": "integer",
          "description": "Number of encounters in summary",
          "minimum": 0
        },
        "total_damage": {
          "type": "integer",
          "description": "Total damage done",
          "minimum": 0
        },
        "total_healing": {
          "type": "integer",
          "description": "Total healing done",
          "minimum": 0
        },
        "death_count": {
          "type": "integer",
          "description": "Total number of deaths",
          "minimum": 0
        }
      },
      "additionalProperties": false
    }
  },
  "examples": [
    {
      "id": 1,
      "name": "Thrall",
      "server": "Stormrage",
      "class_name": "Shaman",
      "spec_name": "Enhancement",
      "level": 80,
      "guild_name": "Earthen Ring",
      "faction": "Horde",
      "race": "Orc",
      "gender": "Male",
      "first_seen": "2024-01-01T10:00:00Z",
      "last_seen": "2024-01-15T22:30:00Z",
      "total_encounters": 45,
      "avg_item_level": 489.5,
      "is_active": true,
      "performance_summary": {
        "avg_dps": 125000.5,
        "avg_hps": 15000.2,
        "avg_dtps": 8500.1,
        "best_dps": 180000.0,
        "best_hps": 25000.0,
        "survival_rate": 92.5,
        "activity_percentage": 87.3,
        "parse_percentile": 75.2,
        "encounter_count": 45,
        "total_damage": 25600000,
        "total_healing": 1200000,
        "death_count": 3
      }
    }
  ]
}